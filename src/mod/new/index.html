<!-- GR8BRIK VERSION 12-18-2025 (MISC IMPROVEMENTS) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Modeler - Gr8brik</title>
  <meta charset="utf-8">
  <base href="/mod/new/">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

  <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/7/Stats.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@latest/dist/jszip.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@latest/build/three.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@latest/examples/js/loaders/LDrawLoader.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@latest/examples/js/controls/OrbitControls.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@latest/examples/js/controls/TransformControls.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.1/spectrum.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@latest/examples/js/loaders/RGBELoader.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.127.0/examples/js/exporters/GLTFExporter.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/gh/susstevedev/gr8brik/lib/ColladaExporter-modded.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/gh/GitHubDragonFly/GitHubDragonFly.github.io/viewers/static/js/exporters/OBJExporter.js" crossorigin="anonymous"></script>
  <script src="index.js" defer></script>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.1/spectrum.min.css" crossorigin="anonymous" >
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="index.css">
</head>

<body>
  <div id="top-container">
    <span id="link-home"><img src="img/logo.png" id="logo-img" /><a href="/" target="_blank"><span>&nbsp;Gr8brik&nbsp;</span></a><span class="tag">Beta</span></span>
    <span class="menu-main">
      <button class="menu-item" id="menu-file"><i class="fa fa-hdd-o" aria-hidden="true"></i>Saving</button>
      <button class="menu-item" id="menu-edit"><i class="fa fa-clipboard" aria-hidden="true"></i>Tools</button>
      <button class="menu-item" id="settings-popup-open"><i class="fa fa-sliders" aria-hidden="true"></i>Settings</button>
      <button class="menu-item" id="menu-help"><i class="fa fa-sliders" aria-hidden="true"></i><a href="/docs/">Help</a></button>
    </span>
    <span class="dropdown-main">
      <span class="dropdown-element" id="dropdown-file">
        <div class="dropdown-item" id="save-popup-open"><i class="fa fa-database" aria-hidden="true"></i>Save to cloud</div>
        <div class="dropdown-item" id="import-popup-open"><i class="fa fa-download" aria-hidden="true"></i>Import...</div>
        <div class="dropdown-item" id="export-popup-open"><i class="fa fa-upload" aria-hidden="true"></i>Export...</div>
      </span>
      <span class="dropdown-element" id="dropdown-edit">
        <div class="dropdown-item" id="move-block-t"><i class="fa fa-arrows-alt" aria-hidden="true"></i>Drag</div>
        <div class="dropdown-item" id="move-block-r"><i class="fa fa-refresh" aria-hidden="true"></i>Rotate</div>
        <div class="dropdown-item" id="duplicate-part"><i class="fa fa-files-o" aria-hidden="true"></i>Duplicate part</div>
        <div class="dropdown-item" id="delete-block"><i class="fa fa-trash" aria-hidden="true"></i>Delete part</div>
      </span>
    </span>
    <a href="https://gr8brik.rf.gd/acc/login" target="_blank" id="username-field">Login&nbsp;&nbsp;&nbsp;&nbsp;</a>
  </div>

	<div class="mobile-toggle-contain">
      <button id="toggleMenu" class="mobile-toggle" style="top: 60px; padding-right: 0px; padding-left: 0px;">
		<i class="fa fa-bars" aria-hidden="true" title="Reset the camera location"></i>
	  </button>
	
	  <button id="takeScreenshot" class="mobile-toggle" style="top: 160px; padding-right: 0px; padding-left: 0px;">
		<i class="fa fa-camera" aria-hidden="true" title="Take a screenshot"></i>
	  </button>

	  <button id="resetCamera" class="mobile-toggle" style="top: 260px; padding-right: 0px; padding-left: 0px;">
		<i class="fa fa-refresh" aria-hidden="true" title="Reset the camera location"></i>
	  </button>
	</div>
  
  <div id="left-container">
    <p style="height: 2vh;"></p>

    <!--
    <button class="btn" title="Settings for the modeler" id="settings-popup-open"><i class="fa fa-cog" aria-hidden="true"></i>Settings</button><br />
    <span>Progress</span><br />
    <button class="btn" title="Save creation data to database" id="save-popup-open"><i class="fa fa-database" aria-hidden="true"></i>Save to Cloud</button><br />
    <button id="import-popup-open" class="btn"><i class="fa fa-download" aria-hidden="true"></i>Import...</button>
    <button id="export-popup-open" class="btn"><i class="fa fa-upload" aria-hidden="true"></i>Export...</button><hr />
    
    <span>Edit tools</span><br />
    <button class="btn" title="Change controls to arrows to move blocks up and down, side-by-side." id="move-block-t"><i class="fa fa-arrows-alt" aria-hidden="true"></i>Drag</button>
    <button class="btn" title="Change controls to rotate blocks, in all directions." id="move-block-r"><i class="fa fa-refresh" aria-hidden="true"></i>Rotate</button><br />
    <button id="duplicate-part" class="btn" title="Copy the block that was last added and paste it"><i class="fa fa-files-o" aria-hidden="true"></i>Duplicate Block</button><br />
    <button id="delete-block" class="btn" title="Remove a block from the scene, along with all records of it"><i class="fa fa-trash" aria-hidden="true"></i>Delete Block</button><hr />
    -->

    <span>Color</span><br />
    <input type="text" id="color-picker" /><br />
	<span class="sub">Selected layer</span><br />
	<span class="sub"><em>Most textured parts have more than three layers.</em></span><br />
	<input type="number" title="Selected material layer. Most textured LDraw parts have more than three layers. Currently an alpha feature." id="selected-map" min="0" max="50" step="1" value="0"><hr />
    <span id="obj-colors"></span>

    <span>Filter</span><br />

    <span style="font-size: 14px;">CDN</span>
    <select id="part-library-filter" style="display: inline-block;">
        <option id="parts-lib-1" value="https://raw.githubusercontent.com/susstevedev/gr8brik-ldraw-fork/refs/heads/main/ldraw-parts/actual/" selected>susstevedev/gr8brik-ldraw-fork (default, most stable)</option>
        <option id="parts-lib-2" value="https://library.ldraw.org/library/official/">Ldraw.org library (UNSTABLE, USE AT OWN RISK)</option>
    </select><br />

    <span style="font-size: 14px;">Category</span>
    <select id="part-type-filter" style="display: inline-block;">
        <option value="brick" selected>Bricks</option>
        <option value="plate">Plates</option>
        <option value="baseplate">Baseplates</option>
        <option value="tile">Tiles</option>
        <option value="slope">Slopes</option>
        <option value="minifig">Minifigs</option>
        <option value="duplo">Duplo</option>
        <option value="animal">Animals</option>
        <option value="technic">Technic</option>
        <option value="wedge">Wedges</option>
        <option value="hinge">Hinges</option>
        <option value="clip_&_bar">Clips & Bars</option>
        <option value="connector">Connectors</option>
        <option value="wheel_&_tyre">Wheels & Tyres</option>
        <option value="train">Train Parts</option>
        <option value="panel">Panels</option>
        <option value="round_&_curved">Round & Curved</option>
        <option value="other">Miscellaneous</option>
    </select><br />

    <input type="text" id="search-parts" placeholder="search parts..." /><hr />

    <button id="tab1" class="tab-button">Parts list</button>
    <button id="tab2" class="tab-button">Parts in scene</button><br /><br />
    
	  <input type="file" id="cre-import" accept=".json,.gr8" style="display: none;"><input type="file" id="cre-import-three" accept=".json" style="display: none;"><input type="file" id="cre-import-ldr" accept=".ldr,.dat" style="display: none;">
	  <span id="cre-export" style="display: none;"></span><span id="cre-export-gr8" style="display: none;"></span><span id="cre-export-ldd" style="display: none;"></span><span id="selected-object-export-three" style="display: none;"></span><span id="cre-export-three" style="display: none;"></span><span id="cre-export-dae" style="display: none;"></span>

    <span id="select-block"></span>

    <ul id="block-list">
      <div class="groups-important">Gr8brik treats some parts as groups and vice-versa.</div>
    </ul>
  </div>

  <div class="ui-popup-contain" id="welcome-popup">
    <button class="btn-alt" style="float: right; top: 0;">&#10006;</button>
    <h3><span style="color: #fff;">Welcome to Gr8brik</span></h3>
    <div id="dev-welcome-popup-form">
      <p>Would you like to:</p>
      <p><button class="close btn" title="Start a new creation">Start a new creation</button></p>
    </div>
  </div>

  <div class="ui-popup-contain" id="save-popup">
    <button class="btn-alt" style="float: right; top: 0;">&#10006;</button>
    <h3><span style="color: #fff;">Save Creation</span></h3>
    <div id="save-popup-form">
      <p><input class="w3-input w3-border" type="text" name="name" placeholder="Name"></p>
      <p><textarea name="desc" rows="4" cols="32" placeholder="Description"></textarea></p>
      <p><button class="btn" title="Finish saving" id="download-json">Save Creation</button></p>
    </div>
  </div>
  
  <div class="ui-popup-contain" id="import-popup">
    <button class="btn-alt" style="float: right; top: 0;">&#10006;</button>
    <h3><span style="color: #fff;">Import Model</span></h3>
    <div id="import-popup-form">
		<select id="import-format" style="display: inline-block;">
			<option value="cloud" selected>From account</option>
			<option value="json">GR8BRIK (.json, .gr8)</option>
			<option value="three">ThreeJS (.json)</option>
      <option value="ldr">Ldraw (.ldr, .dat, .mpd)</option>
		</select><br />
		<p><button class="btn" title="Finish importing" id="import-finish">Select file</button></p>
    </div>
  </div>
  
  <div class="ui-popup-contain" id="export-popup">
    <button class="btn-alt" style="float: right; top: 0;">&#10006;</button>
    <h3><span style="color: #fff;">Export Model</span></h3>
    <div id="export-popup-form">
		<select id="export-format" style="display: inline-block;">
      <option value="gr8">GR8BRIK (.gr8)</option>
			<option value="json">GR8BRIK (.json)</option>
      <option value="mpd">Ldraw (.mpd)</option>
			<option value="three">ThreeJS (.json)</option>
      <option value="selectedobj">Selected object geometry (.json)</option>
			<option value="lxf">Lego Digital Designer (.lxf)</option>
			<option value="dae">Collada (.dae)</option>
      <option value="obj">Wavefront (.obj)</option>
      <option value="glb">GL Transmission Format (.gltf)</option>
		</select><br />
		<p><button class="btn" title="Finish exporting" id="export-finish">Download file</button></p>
    </div>
  </div>

  <div class="ui-popup-contain" id="settings-popup">
    <button class="btn-alt" style="float: right; top: 0;">&#10006;</button>
    <h3><span style="color: var(--ui-text-color);">Modeler Settings</span></h3>

    <p><span style="color: var(--ui-text-color);"><i class="fa fa-user" aria-hidden="true"></i>&nbsp;Account</span></p>

    <div id="settings-account-auth">
      <img style="width: 30px; height: 30px; border-radius: 50%;" alt="Profile icon for your account" src="img/logo.png"></img>
      <span id="settings-account-auth-username" style="bottom: 10px; position: relative;">Username</span>
    </div>

    <p>Modeler account intergration is coming soon along with GitHub login.</p>

    <hr />

    <p><span style="color: var(--ui-text-color);"><i class="fa fa-paint-brush" aria-hidden="true"></i>&nbsp;Display</span></p>

    <h5><span style="color: var(--ui-text-color);">Parts</span></h5>

    <input type="checkbox" id="smooth-normals-enable" checked>
    <label for="smooth-normals-enable">Enable smooth normals</label><br />

    <input type="checkbox" id="display-lines-enable">
    <label for="display-lines-enable">Enable lines</label><br />

    <input type="checkbox" id="pbr-enable" checked>
    <label for="display-lines-enable">Enable PBR shading (applies only to new parts)</label><br />

    <h5><span style="color: var(--ui-text-color);">User interface</span></h5>

    <input type="checkbox" id="trans-enable" checked>
    <label for="trans-enable">Enable transparent UI elements*</label><br />

    <h5><span style="color: var(--ui-text-color);">Other</span></h5>

    <input type="checkbox" id="hdr-enable">
    <label for="hdr-enable">Enable HDRI lighting (applies only to new parts)</label><br />

    <hr />

    <p><span style="color: var(--ui-text-color);"><i class="fa fa-floppy-o" aria-hidden="true"></i>&nbsp;Saving and recovery</span></p>

		<button class="btn" title="Load autosave from device" id="read_autosave"><i class="fa fa-floppy-o" aria-hidden="true"></i>Recover Autosave</button><br />
    <button class="btn" title="Clear autosave from device" id="clear_autosave"><i class="fa fa-trash" aria-hidden="true"></i>Trash Autosave</button><br />

		<button class="btn" title="Load settings from device" id="read_settings">
      <i class="fa fa-sliders" aria-hidden="true"></i>
      <i class="fa fa-floppy-o" aria-hidden="true"></i>
      Recover Settings
    </button><br />

    <button class="btn" title="Clear settings from device" id="clear_settings">
      <i class="fa fa-sliders" aria-hidden="true"></i>
      <i class="fa fa-trash" aria-hidden="true"></i>
      Trash Settings
    </button><br /><hr />

    <p>Version <b>December 18th, 2025</b></p>
    <p>Created by <a href="https://github.com/susstevedev">susstevedev</a> on GitHub.</p>
    <p>2023 - 2025 Gr8brik. All rights reserved.</p>
    </div>
  </div>

  <div id="preloaded-logo">
    <div class="img"></div>
  </div>

  <script>
    // no longer here
  </script>

  <!-- LDRAW.ORG CC BY 2.0 PARTS LIBRARY ATTRIBUTION -->
  <div class="ldraw-logo">
        <a href="http://www.ldraw.org">
            <img style="width: 145px" src="img/ldraw.png">
        </a>
    <br />
    <a href="http://www.ldraw.org/" style="color:#000;">This software uses the LDraw Parts Library &amp; LDrawLoader.js</a>
  </div>

</body>
</html>